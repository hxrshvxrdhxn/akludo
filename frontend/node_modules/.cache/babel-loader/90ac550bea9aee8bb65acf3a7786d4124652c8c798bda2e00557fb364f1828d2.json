{"ast":null,"code":"import { call, put, takeEvery } from \"redux-saga/effects\";\nimport { storeToken, appLogout, storeError } from \"./actions\";\nimport '../types';\nimport { getLoginToken } from \"./api\";\nimport Cookies from 'universal-cookie';\nconst cookies = new Cookies();\nfunction* getToken(action) {\n  try {\n    var _data$data$data;\n    const data = yield call(getLoginToken, action.payload);\n    cookies.set('token', (_data$data$data = data.data.data) === null || _data$data$data === void 0 ? void 0 : _data$data$data.token);\n    //console.log(\"hitlogin\",data.data.data?.token);\n    if (data.data.error) {\n      //console.log(\"log in error\",data.data.error)\n      yield put(storeError({\n        error: data.data.error\n      }));\n    } else {\n      yield put(storeToken({\n        token: data.data.data.token,\n        phone_number: action.payload.phone_number\n      }));\n    }\n  } catch (e) {\n    //console.log(e);\n  }\n}\nfunction* getTokenForgotMpin(action) {\n  try {\n    cookies.set('token', action.payload.token);\n    //console.log(\"check my action man baby\",action.payload.token)\n    //console.log(action)\n    //console.log(\"teret teret teret\")\n    yield put(storeToken({\n      token: action.payload.token,\n      phone_number: action.payload.phone_number\n    }));\n  } catch (e) {\n    //console.log(e);\n  }\n}\nfunction* expireToken(action) {\n  try {\n    // do api call\n    // const data = yield call(getLoginToken);\n    yield put(appLogout());\n  } catch (e) {\n    //console.log(e);\n  }\n}\nexport function* watchLogin() {\n  yield takeEvery(HITLOGIN, getToken);\n}\nexport function* watchLogout() {\n  yield takeEvery(HITLOGOUT, expireToken);\n}\nexport function* watchForgotMpin() {\n  yield takeEvery(HITFORGOTMPIN, getTokenForgotMpin);\n}","map":{"version":3,"names":["call","put","takeEvery","storeToken","appLogout","storeError","getLoginToken","Cookies","cookies","getToken","action","_data$data$data","data","payload","set","token","error","phone_number","e","getTokenForgotMpin","expireToken","watchLogin","HITLOGIN","watchLogout","HITLOGOUT","watchForgotMpin","HITFORGOTMPIN"],"sources":["/home/codalien/akludo/src/store/modules/auth/sagas.js"],"sourcesContent":["import { call, put, takeEvery } from \"redux-saga/effects\";\nimport { storeToken, appLogout, storeError } from \"./actions\";\nimport {  } from '../types'\nimport { getLoginToken } from \"./api\";\nimport Cookies from 'universal-cookie';\n \nconst cookies = new Cookies();\n\nfunction* getToken(action) {\n    try {\n        const data = yield call(getLoginToken, action.payload);\n        cookies.set('token', data.data.data?.token);\n        //console.log(\"hitlogin\",data.data.data?.token);\n        if (data.data.error){\n            //console.log(\"log in error\",data.data.error)\n            yield put(storeError({error: data.data.error}));\n        } else {\n            yield put(storeToken({token:data.data.data.token, phone_number: action.payload.phone_number}));\n        }\n    } catch (e) {\n        //console.log(e);\n    }\n}\n\nfunction* getTokenForgotMpin(action) {\n    try {\n        cookies.set('token', action.payload.token);\n        //console.log(\"check my action man baby\",action.payload.token)\n        //console.log(action)\n        //console.log(\"teret teret teret\")\n        yield put(storeToken({token:action.payload.token, phone_number: action.payload.phone_number}))\n    } catch (e) {\n        //console.log(e);\n    }\n}\n\nfunction* expireToken(action) {\n    try {\n        // do api call\n        // const data = yield call(getLoginToken);\n        yield put(appLogout());\n    } catch (e) {\n        //console.log(e);\n    }\n}\n\nexport function* watchLogin() {\n    yield takeEvery(HITLOGIN, getToken);\n}\n\nexport function* watchLogout() {\n    yield takeEvery(HITLOGOUT, expireToken);\n}\n\nexport function* watchForgotMpin() {\n    yield takeEvery(HITFORGOTMPIN, getTokenForgotMpin);\n}"],"mappings":"AAAA,SAASA,IAAI,EAAEC,GAAG,EAAEC,SAAS,QAAQ,oBAAoB;AACzD,SAASC,UAAU,EAAEC,SAAS,EAAEC,UAAU,QAAQ,WAAW;AAC7D,OAAiB,UAAU;AAC3B,SAASC,aAAa,QAAQ,OAAO;AACrC,OAAOC,OAAO,MAAM,kBAAkB;AAEtC,MAAMC,OAAO,GAAG,IAAID,OAAO,EAAE;AAE7B,UAAUE,QAAQA,CAACC,MAAM,EAAE;EACvB,IAAI;IAAA,IAAAC,eAAA;IACA,MAAMC,IAAI,GAAG,MAAMZ,IAAI,CAACM,aAAa,EAAEI,MAAM,CAACG,OAAO,CAAC;IACtDL,OAAO,CAACM,GAAG,CAAC,OAAO,GAAAH,eAAA,GAAEC,IAAI,CAACA,IAAI,CAACA,IAAI,cAAAD,eAAA,uBAAdA,eAAA,CAAgBI,KAAK,CAAC;IAC3C;IACA,IAAIH,IAAI,CAACA,IAAI,CAACI,KAAK,EAAC;MAChB;MACA,MAAMf,GAAG,CAACI,UAAU,CAAC;QAACW,KAAK,EAAEJ,IAAI,CAACA,IAAI,CAACI;MAAK,CAAC,CAAC,CAAC;IACnD,CAAC,MAAM;MACH,MAAMf,GAAG,CAACE,UAAU,CAAC;QAACY,KAAK,EAACH,IAAI,CAACA,IAAI,CAACA,IAAI,CAACG,KAAK;QAAEE,YAAY,EAAEP,MAAM,CAACG,OAAO,CAACI;MAAY,CAAC,CAAC,CAAC;IAClG;EACJ,CAAC,CAAC,OAAOC,CAAC,EAAE;IACR;EAAA;AAER;AAEA,UAAUC,kBAAkBA,CAACT,MAAM,EAAE;EACjC,IAAI;IACAF,OAAO,CAACM,GAAG,CAAC,OAAO,EAAEJ,MAAM,CAACG,OAAO,CAACE,KAAK,CAAC;IAC1C;IACA;IACA;IACA,MAAMd,GAAG,CAACE,UAAU,CAAC;MAACY,KAAK,EAACL,MAAM,CAACG,OAAO,CAACE,KAAK;MAAEE,YAAY,EAAEP,MAAM,CAACG,OAAO,CAACI;IAAY,CAAC,CAAC,CAAC;EAClG,CAAC,CAAC,OAAOC,CAAC,EAAE;IACR;EAAA;AAER;AAEA,UAAUE,WAAWA,CAACV,MAAM,EAAE;EAC1B,IAAI;IACA;IACA;IACA,MAAMT,GAAG,CAACG,SAAS,EAAE,CAAC;EAC1B,CAAC,CAAC,OAAOc,CAAC,EAAE;IACR;EAAA;AAER;AAEA,OAAO,UAAUG,UAAUA,CAAA,EAAG;EAC1B,MAAMnB,SAAS,CAACoB,QAAQ,EAAEb,QAAQ,CAAC;AACvC;AAEA,OAAO,UAAUc,WAAWA,CAAA,EAAG;EAC3B,MAAMrB,SAAS,CAACsB,SAAS,EAAEJ,WAAW,CAAC;AAC3C;AAEA,OAAO,UAAUK,eAAeA,CAAA,EAAG;EAC/B,MAAMvB,SAAS,CAACwB,aAAa,EAAEP,kBAAkB,CAAC;AACtD"},"metadata":{},"sourceType":"module","externalDependencies":[]}